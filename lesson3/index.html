lesson3/index.html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>振動工具の安全衛生講習</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');
        
        /* Basic Styles */
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #f0f2f5;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        /* Slide Container */
        .slide {
            width: 95vw; /* Use viewport width for better scaling */
            height: auto; /* Height will be set by aspect-ratio */
            aspect-ratio: 4 / 3; /* Enforce 4:3 landscape ratio */
            max-width: 1024px;
            max-height: 768px; /* 4:3 Aspect Ratio */
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            padding: 40px 60px;
            box-sizing: border-box;
            display: none; /* Hide all slides by default */
            flex-direction: column;
            position: relative;
        }
        .slide.active {
            display: flex; /* Show active slide */
        }

        /* Typography */
        h1 {
            font-size: 2.8em;
            color: #1a237e; /* Dark Blue */
            border-bottom: 4px solid #1e88e5; /* Light Blue */
            padding-bottom: 10px;
            margin-top: 0;
            text-align: center;
        }
        h2 {
            font-size: 2.2em;
            color: #0d47a1;
            margin-top: 0;
            margin-bottom: 30px;
        }
        h3 {
            font-size: 1.6em;
            color: #1565c0;
            border-left: 5px solid #64b5f6;
            padding-left: 15px;
            margin-top: 20px;
        }
        p, li {
            font-size: 1.2em;
            line-height: 1.8;
            color: #333;
        }
        ul, ol {
            padding-left: 30px;
        }
        li {
            margin-bottom: 10px;
        }
        strong {
            color: #d32f2f; /* Red for emphasis */
            font-weight: bold;
        }
        
        /* Layout & Components */
        .footer {
            position: absolute;
            bottom: 20px;
            right: 40px;
            font-size: 1.2em;
            color: #777;
        }
        .slide-title {
            text-align: center;
            margin: auto;
        }
        .two-column {
            display: flex;
            gap: 40px;
            width: 100%;
        }
        .column {
            flex: 1;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
            font-size: 1em;
        }
        th {
            background-color: #e3f2fd;
            font-weight: bold;
            color: #0d47a1;
        }
        .image-container {
            text-align: center;
            margin: 20px 0;
        }
        .image-container img {
            max-width: 80%;
            height: auto;
            border-radius: 8px;
            border: 1px solid #ddd;
        }
        .note {
            font-size: 0.9em;
            color: #555;
            margin-top: 15px;
        }

        /* --- Gemini API Feature Styles (For KYT Generator) --- */
        .gemini-feature-btn {
            background-color: #4A90E2; /* A professional blue */
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        .gemini-feature-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.25);
            background-color: #357ABD;
        }
        .gemini-feature-btn:disabled, .gemini-feature-btn.loading {
            background-color: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .gemini-feature-btn .btn-text {
            display: inline-block;
        }
        .gemini-feature-btn .btn-loader {
            display: none;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.5);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }
        .gemini-feature-btn.loading .btn-text { display: none; }
        .gemini-feature-btn.loading .btn-loader { display: block; }

        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none; /* Hidden by default */
        }

        .kyt-input {
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            border-radius: 8px;
            border: 1px solid #ccc;
            margin-bottom: 20px;
            box-sizing: border-box;
        }
        .kyt-result {
            margin-top: 20px;
            padding: 20px;
            background-color: #f9f9f9;
            border-left: 5px solid #1e88e5;
            text-align: left;
            max-height: 280px;
            overflow-y: auto;
            border-radius: 0 8px 8px 0;
        }
        .kyt-result pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: inherit;
            font-size: 1em;
            margin: 0;
        }

        /* --- Navigation Arrow Styles --- */
        .nav-arrow {
            position: fixed; /* Position relative to the browser window */
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background-color: rgba(0, 0, 0, 0.4);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 30px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.2s;
            z-index: 1000;
            user-select: none; /* Prevents selecting the arrow text */
        }
        .nav-arrow:hover {
            background-color: rgba(0, 0, 0, 0.7);
        }
        .nav-arrow.prev {
            left: 20px;
        }
        .nav-arrow.next {
            right: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>

    <!-- Navigation Arrows -->
    <div class="nav-arrow prev" id="prev-btn">‹</div>
    <div class="nav-arrow next" id="next-btn">›</div>

    <!-- Slide 1: Title -->
    <div class="slide active">
        <div class="slide-title">
            <h1>振動工具取扱作業者<br>安全衛生講習</h1>
            <p style="font-size: 1.5em; color: #555;">消防職員向け特別講習</p>
            <p><strong>主催:</strong> okazaki fd</p>
            <p><strong>講習日時:</strong> 2025年11月11日</p>
            <p><strong>講師:</strong> sakamoto </p>
        </div>
        <div class="footer">1 / 51</div>
    </div>

    <!-- Slide 2: Introduction -->
    <div class="slide">
        <h2>はじめに - なぜ今、この講習が必要なのか</h2>
        <p>消防職員の皆様は、救助活動において様々な動力工具を使用します。特に、コンクリート・ブレーカーやエンジンカッターなどの<strong>振動工具</strong>は、迅速な救助活動に不可欠です。</p>
        <p>しかし、その利便性の裏には、<strong>「振動障害」</strong>という深刻な健康リスクが潜んでいます。この障害は一度発症すると完治が難しく、皆様の選手生命、ひいては日常生活にまで影響を及ьす可能性があります。</p>
        <h3>本日のゴール:</h3>
        <p>振動障害のリスクを正しく理解し、<strong>明日からの現場活動で実践できる具体的な予防策</strong>を習得する。</p>
        <div class="footer">2 / 51</div>
    </div>

    <!-- Slide 3: Agenda -->
    <div class="slide">
        <h2>講習の構成（アジェンダ）</h2>
        <ol>
            <li><strong>振動障害とは何か？</strong> — 見えざる敵の正体</li>
            <li><strong>法令・指針の理解</strong> — 私たちを守るルール</li>
            <li><strong>振動工具の基礎知識</strong> — 敵を知り己を知る</li>
            <li><strong>具体的な予防対策（管理）</strong> — 組織としてやるべきこと</li>
            <li><strong>具体的な予防対策（作業）</strong> — 個人で実践すべきこと</li>
            <li><strong>健康管理と教育</strong> — 早期発見と知識の定着</li>
            <li><strong>まとめ</strong> — 継続的な安全文化の醸成</li>
        </ol>
        <div class="footer">3 / 51</div>
    </div>

    <!-- Slide 4 -->
    <div class="slide">
        <h2>第1章 振動障害とは何か？</h2>
        <h3>振動障害の定義</h3>
        <p>振動工具から発生する振動に、手や腕などを介して長時間ばく露されることによって生じる、末梢循環障害、末梢神経障害、運動器（骨・関節系）障害の総称です。</p>
        <div class="two-column">
            <div class="column">
                <h3>主な症状</h3>
                <ul>
                    <li><strong>レイノー現象:</strong> 指が冷たくなると白くなる（蒼白化）。</li>
                    <li><strong>しびれ・感覚の鈍化:</strong> 指先の感覚が鈍くなる、触っても分かりにくい。</li>
                    <li><strong>握力の低下:</strong> 物を掴む力が弱くなる、工具を落としやすくなる。</li>
                    <li><strong>関節痛・筋肉痛:</strong> 肘や手首、肩などに痛みを感じる。</li>
                </ul>
            </div>
            <div class="column">
                <div class="image-container">
                    <img src="https://placehold.co/400x300/e0f7fa/006064?text=%E3%83%AC%E3%82%A4%E3%83%8E%E3%83%BC%E7%8F%BE%E8%B1%A1%E3%81%AE%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8" alt="レイノー現象のイメージ図">
                    <p class="note">指先が血の気を失い、真っ白になるレイノー現象</p>
                </div>
            </div>
        </div>
        <div class="footer">4 / 51</div>
    </div>

    <!-- Slide 5 -->
    <div class="slide">
        <h2>振動障害の進行プロセス</h2>
        <p>自覚症状がない初期段階から、日常生活に支障をきたす重篤な段階まで、徐々に進行します。</p>
        <div class="image-container">
            <img src="https://placehold.co/800x400/fff8e1/8d6e63?text=%E6%BD%9C%E4%BC%8F%E6%9C%9F%E3%80%80%E2%86%92%E3%80%80%E5%88%9D%E6%9C%9F%E7%97%87%E7%8A%B6%E3%80%80%E2%86%92%E3%80%80%E9%80%B2%E8%A1%8C%E6%9C%9F%E3%80%80%E2%86%92%E3%80%80%E6%9C%AB%E6%9C%9F%E7%97%87%E7%8A%B6" alt="振動障害の進行段階を示す図">
        </div>
        <ul>
            <li><strong>潜伏期:</strong> 症状はないが、体内では変化が始まっている。</li>
            <li><strong>初期症状:</strong> しびれ感、冷えを感じる。<strong>この段階での対策が極めて重要。</strong></li>
            <li><strong>進行期:</strong> レイノー現象が頻発、握力が明確に低下。</li>
            <li><strong>末期症状:</strong> 工具の操作が困難に。日常生活にも大きな支障。</li>
        </ul>
        <p><strong>ポイント:</strong> 症状を自覚した時には、すでにある程度進行している可能性があります。</p>
        <div class="footer">5 / 51</div>
    </div>
    
    <!-- Slide 6 -->
    <div class="slide">
        <h2>第2章 法令・指針の理解</h2>
        <h3>根拠となる法令と指針</h3>
        <p>事業者は、労働者の安全と健康を守る義務があります。これは法令で定められています。</p>
        <ul>
            <li><strong>労働安全衛生法 第22条:</strong>
                <br>事業者は、振動等による労働者の健康障害を防止するため、必要な措置を講じなければならない。
            </li>
            <li><strong>「チェーンソー以外の振動工具の取扱い業務に係る振動障害予防対策指針」（平成21年 基発0710第2号）:</strong>
                <br>本日の講習の根幹となる具体的な対策を示したガイドライン。
            </li>
        </ul>
        <h3>消防組織における「事業者」とは？</h3>
        <p>消防長や署長など、組織の管理者が事業者に該当し、隊員の安全衛生を確保する責任を負います。</p>
        <p class="note">これらの法令・指針は、私たち作業者を守るための重要なルールです。</p>
        <div class="footer">6 / 51</div>
    </div>

    <!-- Slide 7 -->
    <div class="slide">
        <h2>指針の最重要ポイント: 振動ばく露管理</h2>
        <p>指針では、振動の強さと時間に基づいた管理を求めています。</p>
        <h3>日振動ばく露量 A(8)</h3>
        <p>1日の作業時間（8時間）における振動ばく露量を表す指標です。</p>
        <table>
            <thead>
                <tr>
                    <th>A(8) の値</th>
                    <th>管理レベル</th>
                    <th>求められる対応</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>5.0 m/s²</strong></td>
                    <td>ばく露限界値</td>
                    <td>この値を超えてはならない。作業方法の見直しが必須。</td>
                </tr>
                <tr>
                    <td><strong>2.5 m/s²</strong></td>
                    <td>ばく露対策値</td>
                    <td>この値に達したら、ばく露時間短縮などの対策を講じる必要がある。</td>
                </tr>
            </tbody>
        </table>
        <p><strong>キーポイント:</strong> <strong>「強い振動を、短時間」</strong>浴びるのも、<strong>「弱い振動を、長時間」</strong>浴びるのも、どちらもリスクになります。重要なのは、その日の総量です。</p>
        <div class="footer">7 / 51</div>
    </div>

    <!-- Slide 8 -->
    <div class="slide">
        <h2>第3章 振動工具の基礎知識</h2>
        <h3>振動の強さ：周波数補正振動加速度実効値の3軸合成値</h3>
        <p>工具の性能を示す重要な指標で、カタログや取扱説明書に記載されています。</p>
        <ul>
            <li><strong>単位:</strong> m/s² (メートル毎秒毎秒)</li>
            <li><strong>意味:</strong> 人体に影響を与えやすい周波数を考慮した、3方向（X, Y, Z軸）の振動の大きさを合成した値。</li>
            <li><strong>ポイント:</strong> この値が<strong>小さいほど、身体への負担が少ない</strong>工具と言えます。</li>
        </ul>
        <div class="image-container">
            <img src="https://placehold.co/500x350/e8eaf6/303f9f?text=3%E8%BB%B8%E5%90%88%E6%88%90%E5%80%A4%E3%81%AE%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E5%9B%B3" alt="3軸合成値のイメージ図">
        </div>
        <p class="note">工具を選定する際は、<strong>必ずこの「3軸合成値」を確認する</strong>習慣をつけましょう。</p>
        <div class="footer">8 / 51</div>
    </div>
    
    <!-- Slide 9 -->
    <div class="slide">
        <h2>消防活動で使われる主な振動工具</h2>
        <p>皆さんが現場で遭遇する可能性のある工具と、その振動の大きさの目安です。</p>
        <table>
            <thead>
                <tr>
                    <th>工具の種類</th>
                    <th>主な用途</th>
                    <th>3軸合成値の目安 (m/s²)</th>
                    <th>特徴</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>コンクリート・ブレーカー</strong></td>
                    <td>コンクリート、アスファルトの破砕</td>
                    <td><strong>10 - 20</strong> (非常に高い)</td>
                    <td>振動レベルが極めて高く、最も注意が必要な工具。</td>
                </tr>
                <tr>
                    <td><strong>エンジンカッター</strong></td>
                    <td>コンクリート、鉄骨の切断</td>
                    <td><strong>5 - 15</strong> (高い)</td>
                    <td>重量があり、全身で振動を受ける。キックバックの危険も。</td>
                </tr>
                <tr>
                    <td><strong>削岩機 (ドリル)</strong></td>
                    <td>コンクリートへの穿孔</td>
                    <td><strong>8 - 18</strong> (高い)</td>
                    <td>押し付ける力が必要で、腕への負担が大きい。</td>
                </tr>
                <tr>
                    <td><strong>レシプロソー (セーバーソー)</strong></td>
                    <td>木材、金属の切断、ドア破壊</td>
                    <td><strong>5 - 12</strong> (中〜高い)</td>
                    <td>狭所での活動に有効だが、振動は無視できない。</td>
                </tr>
                 <tr>
                    <td><strong>インパクトレンチ</strong></td>
                    <td>ボルト・ナットの締緩</td>
                    <td><strong>3 - 8</strong> (中程度)</td>
                    <td>短時間作業が多いが、連続使用でリスクが増大。</td>
                </tr>
            </tbody>
        </table>
         <p class="note">※上記はあくまで目安です。実際の数値は必ず個別の製品仕様で確認してください。</p>
        <div class="footer">9 / 51</div>
    </div>
    
    <!-- Slide 10 -->
    <div class="slide">
        <h2>1日の許容作業時間 (計算例)</h2>
        <p>「3軸合成値」が分かれば、ばく露限界値 (A(8)=5.0m/s²) に達するまでのおおよその作業時間が計算できます。</p>
        <h3>計算式に基づく目安時間</h3>
        <table>
            <thead>
                <tr>
                    <th>工具の3軸合成値 (m/s²)</th>
                    <th>1日の最大許容作業時間 (目安)</th>
                    <th>該当する可能性のある工具</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>2.5</td>
                    <td>8時間</td>
                    <td>(ばく露対策値)</td>
                </tr>
                <tr>
                    <td>5.0</td>
                    <td>2時間</td>
                    <td>比較的新しい低振動モデルの工具</td>
                </tr>
                <tr>
                    <td><strong>7.5</strong></td>
                    <td><strong>約50分</strong></td>
                    <td>エンジンカッター、レシプロソー等</td>
                </tr>
                <tr>
                    <td><strong>10.0</strong></td>
                    <td><strong>約30分</strong></td>
                    <td>削岩機、コンクリート・ブレーカー等</td>
                </tr>
                 <tr>
                    <td><strong>15.0</strong></td>
                    <td><strong>約13分</strong></td>
                    <td>旧式の大型ブレーカー等</td>
                </tr>
            </tbody>
        </table>
        <p><strong>重要な気づき:</strong> 振動の強い工具では、<strong>1日の作業時間は非常に短く制限される</strong>という事実を認識してください。</p>
        <div class="footer">10 / 51</div>
    </div>

    <!-- Slide 11 -->
    <div class="slide">
        <h2>第4章 具体的な予防対策（管理）</h2>
        <h3>管理者が行うべきこと</h3>
        <p>振動障害の予防は、個人の努力だけでは限界があります。組織的な管理体制の構築が不可欠です。</p>
        <ol>
            <li>作業計画の策定</li>
            <li>適切な工具の選定と保守点検</li>
            <li>作業時間の管理</li>
            <li>作業環境の整備</li>
            <li>労働衛生教育の実施</li>
        </ol>
        <p>これらの項目について、次ページから詳しく見ていきます。</p>
        <div class="footer">11 / 51</div>
    </div>
    <!-- Slide 12 -->
    <div class="slide">
        <h2>管理対策 1: 作業計画の策定</h2>
        <p>場当たり的な作業は、振動ばく露を増大させます。事前の計画が極めて重要です。</p>
        <ul>
            <li><strong>作業方法の検討:</strong> 
                <ul>
                    <li>振動工具を使わない工法（静的破砕剤など）は採用できないか？</li>
                    <li>より振動の少ない工具で代替できないか？</li>
                </ul>
            </li>
            <li><strong>作業時間の計画:</strong>
                <ul>
                    <li>1日の振動作業の総時間をあらかじめ設定する。</li>
                    <li>複数の作業者でローテーションを組む計画を立てる。</li>
                </ul>
            </li>
            <li><strong>機材の準備:</strong>
                <ul>
                    <li>使用する工具の3軸合成値を把握し、許容時間を計算しておく。</li>
                    <li>交換用のビットや刃、乾いた防振手袋を準備する。</li>
                </ul>
            </li>
        </ul>
        <p><strong>計画段階でリスクを低減する</strong>ことが、管理者の重要な役割です。</p>
        <div class="footer">12 / 51</div>
    </div>
    <!-- Slide 13 -->
    <div class="slide">
        <h2>管理対策 2: 適切な工具の選定と保守点検</h2>
        <div class="two-column">
            <div class="column">
                <h3>工具の選定</h3>
                <p><strong>最優先事項:</strong> 可能な限り<strong>3軸合成値の小さい、低振動工具</strong>を選定・導入する。</p>
                <ul>
                    <li>防振ハンドルや防振機構が搭載されたモデルを積極的に採用する。</li>
                    <li>「低振動」と表示された工具を優先的に検討する。</li>
                    <li>可能な限り軽量な工具を選ぶ。</li>
                </ul>
            </div>
            <div class="column">
                <h3>工具の保守点検</h3>
                <p>工具の劣化は振動を増大させます。定期的な点検とメンテナンスが不可欠です。</p>
                <ul>
                    <li>衝撃吸収部品（ダンパー等）の劣化をチェックする。</li>
                    <li>刃こぼれや摩耗したビットは、振動を増大させるため速やかに交換する。</li>
                    <li>定期点検の記録をつけ、計画的に部品交換を行う。</li>
                </ul>
            </div>
        </div>
        <div class="image-container">
            <img src="https://placehold.co/600x250/e3f2fd/0d47a1?text=%E4%BD%8E%E6%8C%AF%E5%8B%95%E5%B7%A5%E5%85%B7%E3%81%AE%E導入+%2B+%E5%AE%9A%E6%9C%9F%E7%9A%84%E3%81%AA%E3%83%A1%E3%83%B3%E3%83%86%E3%83%8A%E3%83%B3%E3%82%B9" alt="工具の選定と保守のイメージ">
        </div>
        <div class="footer">13 / 51</div>
    </div>
    <!-- Slide 14 -->
    <div class="slide">
        <h2>管理対策 3: 作業時間の管理</h2>
        <h3>ばく露時間の記録と管理の徹底</h3>
        <p>日振動ばく露量 A(8) を管理するため、個々の隊員の作業時間を正確に把握する必要があります。</p>
        <ul>
            <li><strong>作業時間の記録:</strong>
                <ul>
                    <li>誰が、どの工具を、何分間使用したかを記録する管理表を作成・運用する。</li>
                    <li>スマートフォンアプリやツールを活用することも有効。</li>
                </ul>
            </li>
            <li><strong>ばく露限界の遵守:</strong>
                <ul>
                    <li>1日の作業時間が、工具ごとに設定された許容時間を超えないように管理する。</li>
                    <li>複数の工具を使用する場合は、ばく露量を合算して評価する必要がある。</li>
                </ul>
            </li>
        </ul>
        <p class="note">「感覚」に頼るのではなく、<strong>「記録」に基づいて管理する</strong>ことが重要です。</p>
        <div class="footer">14 / 51</div>
    </div>
    <!-- Slide 15 -->
    <div class="slide">
        <h2>管理対策 4: 作業環境の整備</h2>
        <h3>休憩施設の確保</h3>
        <p>寒冷な環境は、振動障害のリスク（特にレイノー現象）を著しく高めます。</p>
        <ul>
            <li><strong>暖房設備のある休憩場所:</strong>
                <ul>
                    <li>休憩中に身体、特に手や指を温められる場所を確保する。</li>
                </ul>
            </li>
            <li><strong>温かい飲み物の提供:</strong>
                <ul>
                    <li>身体を内側から温めることも重要。</li>
                </ul>
            </li>
            <li><strong>乾燥設備の設置:</strong>
                <ul>
                    <li>濡れた手袋や衣服を乾かすための設備を設ける。</li>
                </ul>
            </li>
        </ul>
        <p>適切な休憩環境の整備は、効果的なリスク低減策です。</p>
        <div class="footer">15 / 51</div>
    </div>
     <!-- Slide 16 -->
    <div class="slide">
        <h2>第5章 具体的な予防対策（作業）</h2>
        <h3>作業者が実践すべきこと</h3>
        <p>組織の管理体制に加えて、作業者一人ひとりの日々の実践が、自身の健康を守る上で最も重要です。</p>
        <ol>
            <li>適切な作業姿勢と工具の保持方法</li>
            <li>連続作業時間と休憩の遵守</li>
            <li>適切な保護具の着用</li>
            <li>身体の保温と体操</li>
            <li>日常の健康管理</li>
        </ol>
        <div class="footer">16 / 51</div>
    </div>
    <!-- Slide 17 -->
    <div class="slide">
        <h2>作業対策 1: 作業方法</h2>
        <h3>適切な工具の選択と正しい姿勢</h3>
        <ul>
            <li><strong>適切な工具の選択:</strong> 作業内容に合った、最も効率的で振動の少ない工具を使用する。</li>
            <li><strong>正しい姿勢:</strong> 無理のない安定した姿勢で作業し、工具を身体でしっかり支える。脇を締め、体重を乗せるように意識する。</li>
            <li><strong>最小限の力で保持:</strong> 工具は<strong>強く握りすぎない</strong>。ハンドルを軽く、しかし確実に保持する。</li>
            <li><strong>適切な押し付け圧:</strong> 工具を無理に押し付けず、工具の自重を利用して作業する。</li>
        </ul>
        <div class="image-container">
            <img src="https://placehold.co/600x250/fbe9e7/bf360c?text=%E5%BC%B7%E3%81%8F%E6%8F%A1%E3%82%89%E3%81%9A%E3%80%81%E4%BD%93%E9%87%8D%E3%82%92%E4%B9%97%E3%81%9B%E3%82%8B" alt="正しい作業姿勢のイメージ">
        </div>
        <div class="footer">17 / 51</div>
    </div>
    <!-- Slide 18 -->
    <div class="slide">
        <h2>作業対策 2: 連続作業時間と休憩</h2>
        <h3>作業時間管理の徹底</h3>
        <p><strong>原則: 1回の連続作業は10分以内。作業間には5分以上の休憩を。</strong></p>
        <p>長時間の連続作業は、短時間で身体に大きなダメージを与えます。こまめな休憩が血行を回復させ、リスクを低減します。</p>
        <h3>休憩中の工夫</h3>
        <ul>
            <li>休憩中は、手や腕を温める（温かい飲み物、カイロなど）。</li>
            <li>指の曲げ伸ばしや、肩を回すなどの軽いストレッチを行う。</li>
            <li>寒い環境では、身体全体が冷えないように防寒対策を徹底する。</li>
        </ul>
        <p class="note"><strong>「あと少しだけ」</strong>が、取り返しのつかない結果に繋がる可能性があります。</p>
        <div class="footer">18 / 51</div>
    </div>
    <!-- Slide 19 -->
    <div class="slide">
        <h2>作業対策 3: 保護具の着用</h2>
        <h3>防振手袋の正しい選択と使用</h3>
        <p>防振手袋は、振動ばく露を低減するための最後の砦です。</p>
        <ul>
            <li><strong>JIS T 8114 適合品を選ぶ:</strong> 性能が保証された規格品を使用する。</li>
            <li><strong>サイズが合ったものを選ぶ:</strong> 大きすぎるとグリップが不安定になり、小さすぎると血行を阻害する。</li>
            <li><strong>濡れたり、硬化したら交換:</strong> 濡れた手袋は振動を伝えやすく、効果がありません。硬化した防振材も同様です。</li>
            <li><strong>定期的な点検:</strong> 破れや防振材の劣化がないか、使用前に必ず確認する。</li>
        </ul>
        <p><strong>注意:</strong> 防振手袋を着用していても、<strong>振動がゼロになるわけではありません。</strong>過信せず、作業時間管理は必ず行ってください。</p>
        <div class="footer">19 / 51</div>
    </div>
    <!-- Slide 20 -->
    <div class="slide">
        <h2>作業対策 4: 身体の保温と体操</h2>
        <h3>血行促進のための習慣</h3>
        <div class="two-column">
            <div class="column">
                <h4>保温</h4>
                <ul>
                    <li>寒い時期は、厚着や防寒着で身体全体を冷やさない。</li>
                    <li>ネックウォーマーやカイロの活用も有効。</li>
                    <li>作業後は、温かいシャワーや入浴で身体を温める。</li>
                </ul>
            </div>
            <div class="column">
                <h4>体操</h4>
                <ul>
                    <li>作業前後に、手首や肩を回すなどの準備体操・整理体操を行う。</li>
                    <li>指の曲げ伸ばし（グーパー運動）を休憩中にこまめに行う。</li>
                    <li>全身の血行を良くするストレッチを習慣にする。</li>
                </ul>
            </div>
        </div>
        <p class="note">これらの小さな習慣の積み重ねが、障害予防に大きな効果をもたらします。</p>
        <div class="footer">20 / 51</div>
    </div>
    <!-- Slide 21 -->
    <div class="slide">
        <h2>作業対策 5: 日常の健康管理</h2>
        <h3>セルフチェックと生活習慣</h3>
        <ul>
            <li><strong>喫煙:</strong> ニコチンは血管を収縮させ、血行を悪化させます。振動障害のリスクを著しく高めるため、<strong>禁煙が強く推奨されます。</strong></li>
            <li><strong>バランスの良い食事:</strong> 身体のコンディションを整える基本です。</li>
            <li><strong>十分な睡眠:</strong> 疲労の蓄積を防ぎ、身体の回復を促します。</li>
            <li><strong>症状の早期報告:</strong> 手指のしびれ、冷え、痛みなど、少しでも異常を感じたら、すぐに上司に報告し、健康診断で医師に相談する。</li>
        </ul>
        <p><strong>「自分の身体は自分で守る」という意識が最も重要です。</strong></p>
        <div class="footer">21 / 51</div>
    </div>
    <!-- Slide 22 -->
    <div class="slide">
        <h2>第6章 健康管理と教育</h2>
        <p>予防対策の効果を確実なものにするためには、継続的な健康管理と、知識を定着させるための教育が車の両輪となります。</p>
        <ul>
            <li><strong>健康管理:</strong>
                <ul>
                    <li>特殊健康診断による早期発見・早期対応</li>
                </ul>
            </li>
            <li><strong>安全衛生教育:</strong>
                <ul>
                    <li>リスクと対策に関する知識の習得と更新</li>
                </ul>
            </li>
        </ul>
        <div class="footer">22 / 51</div>
    </div>
    <!-- Slide 23 -->
    <div class="slide">
        <h2>健康管理 1: 特殊健康診断</h2>
        <p>振動業務従事者は、法令に基づき、健康診断を受ける義務があります。</p>
        <h3>健康診断のタイミング</h3>
        <ul>
            <li>振動業務への雇入れ時</li>
            <li>振動業務への配置替え時</li>
            <li>その後<strong>6ヶ月以内ごとに1回</strong>、定期的に実施</li>
        </ul>
        <h3>検査項目（一部）</h3>
        <ol>
            <li>職歴・業務歴の調査</li>
            <li>自覚症状の問診（しびれ、冷え、痛みなど）</li>
            <li>視診、触診</li>
            <li>血圧測定</li>
            <li>末梢循環機能検査（爪圧迫検査など）</li>
            <li>末梢神経機能検査（痛覚・振動覚検査など）</li>
        </ol>
        <p><strong>重要:</strong> <strong>正直に症状を申告する</strong>ことが、早期発見・早期治療の鍵です。少しの違和感でも、遠慮なく医師に伝えてください。</p>
        <div class="footer">23 / 51</div>
    </div>
    <!-- Slide 24 -->
    <div class="slide">
        <h2>健康管理 2: 健診結果に基づく事後措置</h2>
        <p>健康診断は、受けるだけで終わりではありません。結果に応じた適切な措置が重要です。</p>
        <h3>管理区分と措置</h3>
        <table>
            <thead>
                <tr>
                    <th>管理区分</th>
                    <th>判定</th>
                    <th>求められる措置</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>管理１</td>
                    <td>異常なし</td>
                    <td>通常の業務が可能</td>
                </tr>
                <tr>
                    <td>管理２</td>
                    <td>要観察</td>
                    <td>振動ばく露の低減、生活指導、経過観察</td>
                </tr>
                <tr>
                    <td>管理３</td>
                    <td>要治療</td>
                    <td><strong>振動業務からの転換</strong>、専門医による治療、生活指導</td>
                </tr>
            </tbody>
        </table>
        <p>管理者は、医師の意見を聴取し、作業内容の変更や就業場所の転換など、適切な措置を講じる義務があります。</p>
        <div class="footer">24 / 51</div>
    </div>
    <!-- Slide 25 -->
    <div class="slide">
        <h2>教育 1: 安全衛生教育の実施</h2>
        <p>本日のような講習を定期的に実施し、知識を最新の状態に保つことが重要です。</p>
        <h3>教育のポイント</h3>
        <ul>
            <li><strong>新規入場者・未経験者への教育:</strong>
                <ul>
                    <li>作業を開始する前に、必ず安全衛生教育を実施する。</li>
                    <li>特に、振動のリスクと具体的な予防策を重点的に教える。</li>
                </ul>
            </li>
            <li><strong>定期的な再教育:</strong>
                <ul>
                    <li>全隊員を対象に、定期的に知識の確認と更新を行う。</li>
                    <li>ヒヤリハット事例や事故事例を共有し、組織全体の危険感受性を高める。</li>
                </ul>
            </li>
        </ul>
        <div class="footer">25 / 51</div>
    </div>
    <!-- Slide 26 -->
    <div class="slide">
        <h2>教育 2: KYT（危険予知訓練）の実施</h2>
        <p>具体的な作業場面を想定し、潜む危険とその対策を話し合う訓練を日常的に行うことが、危険感受性を高める上で非常に効果的です。</p>
        <h3>KYTの進め方（例）</h3>
        <ol>
            <li><strong>第1ラウンド（現状把握）:</strong> どんな危険がひそんでいるか？</li>
            <li><strong>第2ラウンド（本質追求）:</strong> これが危険のポイントだ！</li>
            <li><strong>第3ラウンド（対策樹立）:</strong> あなたならどうする？</li>
            <li><strong>第4ラウンド（目標設定）:</strong> 私たちはこうする！</li>
        </ol>
        <p>次のページで、具体的な事例を見てみましょう。</p>
        <div class="footer">26 / 51</div>
    </div>
    <!-- Slide 27 -->
    <div class="slide">
        <h2>危険予知訓練(KYT) 事例</h2>
        <p><strong>状況:</strong> 夏場、長時間の倒壊家屋救助活動。汗で濡れた手袋のまま、コンクリート・ブレーカーを使用している。</p>
        <div class="image-container">
            <img src="https://placehold.co/600x350/ffebee/c62828?text=%E5%80%92%E5%A3%8A%E5%AE%B6%E5%B1%8B%E3%81%A7%E3%81%AE%E6%95%91%E5%8A%A9%E6%B4%BB%E5%8B%95" alt="救助活動のイラスト">
        </div>
        <p><strong>あなたなら、どんな危険を予測し、どう対策しますか？</strong></p>
        <div class="footer">27 / 51</div>
    </div>
    <!-- Slide 28-44 -->
    <div class="slide"><h2>事例の解説とグループワーク</h2><p>先ほどの事例について、グループで危険なポイントと対策を話し合ってみましょう。（...グループワーク...）</p><div class="footer">28 / 51</div></div>
    <div class="slide"><h2>グループワーク発表</h2><p>各グループの発表をお願いします。（...発表...）</p><div class="footer">29 / 51</div></div>
    <div class="slide"><h2>KYT事例のポイント解説 1</h2><h3>危険のポイント</h3><ul><li>濡れた手袋は振動を伝えやすく、防振効果が著しく低下する。</li><li>長時間の連続作業により、日振動ばく露限界量を超える可能性がある。</li><li>暑さによる疲労と集中力低下で、工具の保持が不確実になり、事故のリスクが高まる。</li></ul><div class="footer">30 / 51</div></div>
    <div class="slide"><h2>KYT事例のポイント解説 2</h2><h3>対策</h3><ul><li>乾いた予備の防振手袋を準備し、こまめに交換する。</li><li>10分作業したら5分休憩のサイクルを徹底し、作業者間でローテーションを組む。</li><li>休憩中は水分と塩分を補給し、日陰で身体を休める。</li></ul><div class="footer">31 / 51</div></div>
    <div class="slide"><h2>第5章 まとめ（作業対策）</h2><p>作業者が実践すべき5つのポイントを再確認します。</p><ol><li>適切な作業方法</li><li>連続作業時間と休憩</li><li>保護具の着用</li><li>身体の保温と体操</li><li>日常の健康管理</li></ol><p>これらは全て、自分自身の身体を守るための重要な行動です。</p><div class="footer">32 / 51</div></div>
    <div class="slide"><h2>第6章 まとめ（健康管理と教育）</h2><p>組織として、継続的に取り組むべき2つの柱です。</p><ul><li><strong>健康管理:</strong> 特殊健康診断を確実に実施し、結果に基づいて適切な事後措置を行う。</li><li><strong>教　　育:</strong> 新規入場時教育と定期的な再教育で、知識の陳腐化を防ぎ、安全意識を高く維持する。</li></ul><div class="footer">33 / 51</div></div>
    <div class="slide"><h2>法令違反のリスク</h2><h3>事業者に課せられる責任</h3><p>労働安全衛生法に定められた措置を怠り、労働災害を発生させた場合、事業者は以下のような責任を問われる可能性があります。</p><ul><li><strong>行政上の責任:</strong> 是正勧告、作業停止命令など</li><li><strong>刑事上の責任:</strong> 懲役または罰金</li><li><strong>民事上の責任:</strong> 損害賠償請求</li></ul><p>安全配慮義務を果たすことは、組織を守ることにも繋がります。</p><div class="footer">34 / 51</div></div>
    <div class="slide"><h2>振動レベルの測定について</h2><h3>簡易測定と精密測定</h3><p>カタログ値がない古い工具などは、振動レベルを測定する必要があります。</p><ul><li><strong>簡易測定:</strong> 振動ばく露測定器を用いて、現場で手軽に測定する方法。</li><li><strong>精密測定:</strong> 専門機関に依頼し、JIS規格に沿って正確な値を測定する方法。</li></ul><p>まずは、保有する工具の3軸合成値が不明なものをリストアップすることから始めましょう。</p><div class="footer">35 / 51</div></div>
    <div class="slide"><h2>複数工具を使用した場合の計算</h2><h3>ばく露時間の合算</h3><p>1日に複数の振動工具を使用した場合、それぞれのばく露時間を単純に足すのではなく、振動の強さを考慮した計算が必要です。</p><p>（計算式を提示し、具体的な計算例を解説）</p><p class="note">詳細は厚生労働省の手引き等をご確認ください。重要なのは、ばく露量が加算されていくという認識です。</p><div class="footer">36 / 51</div></div>
    <div class="slide"><h2>事故事例の共有 1</h2><h3>事例：レイノー現象の悪化</h3><p>ある作業員は、冬場の解体工事で連日ブレーカーを使用。指のしびれを感じていたが、「冬だから仕方ない」と放置。ある朝、指が真っ白になり感覚が全くなくなる。診断の結果、重度の振動障害（レイノー現象）と判明。振動業務からの永久的な離脱を余儀なくされた。</p><h3>教訓</h3><p>初期症状を軽視しない。早期報告・早期受診が重要。</p><div class="footer">37 / 51</div></div>
    <div class="slide"><h2>事故事例の共有 2</h2><h3>事例：工具の落下事故</h3><p>削岩機を使用中、突然握力がなくなり、工具を足元に落として負傷。原因は長時間の連続作業による腕の疲労と、振動による末梢神経障害の初期症状。本人は「まだ大丈夫」と思っていた。</p><h3>教訓</h3><p>疲労の自覚がなくても、定められた休憩時間を必ず守る。</p><div class="footer">38 / 51</div></div>
    <div class="slide"><h2>低振動工具の技術動向</h2><p>近年、メーカー各社から振動を大幅に低減した工具が開発・販売されています。</p><ul><li><strong>アクティブ制振技術(AVT):</strong> 逆位相の振動を発生させて、振動を打ち消す技術。</li><li><strong>防振スプリング・ゴムダンパー:</strong> ハンドル部分と振動発生源を分離する構造。</li></ul><p>工具の更新計画を立てる際は、これらの最新技術を搭載したモデルを積極的に検討することが、最も効果的な予防策の一つです。</p><div class="footer">39 / 51</div></div>
    <div class="slide"><h2>作業後のセルフケア</h2><h3>血行を促進するマッサージ</h3><p>作業後や入浴中に、簡単なセルフマッサージを行うことも有効です。</p><ul><li>指先から付け根に向かって、一本ずつ揉む。</li><li>手のひら全体を、もう片方の親指で押す。</li><li>手首から肘に向かって、優しくさする。</li></ul><p><strong>注意:</strong> 痛みや強いしびれがある場合は、自己判断でマッサージせず、医師に相談してください。</p><div class="footer">40 / 51</div></div>
    <div class="slide"><h2>組織としての取り組み事例</h2><h3>A消防本部の事例</h3><ul><li>全振動工具に3軸合成値と1日の許容作業時間を明記したテプラを貼付。</li><li>スマートフォンアプリを導入し、隊員自身が作業時間を簡単に入力・管理できる体制を構築。</li><li>半年に一度の健康診断時に、必ず個人面談を実施し、自覚症状の聞き取りを徹底。</li></ul><p>他組織の良い事例を参考に、自身の職場で何ができるかを考えてみましょう。</p><div class="footer">41 / 51</div></div>
    <div class="slide"><h2>今後の課題</h2><p>振動障害予防対策は、一度行えば終わりではありません。</p><ul><li>新しい工具の導入に伴う、情報更新と再教育。</li><li>若手隊員への技術と知識の伝承。</li><li>ヒヤリハット事例の積極的な収集と、対策へのフィードバック。</li></ul><p>常に改善を続ける意識が、組織の安全レベルを向上させます。</p><div class="footer">42 / 51</div></div>
    <div class="slide"><h2>よくある誤解</h2><ul><li><strong>「体力に自信があるから大丈夫」→ NO:</strong> 振動障害は、体力や筋力に関係なく発症します。</li><li><strong>「防振手袋をすれば時間は関係ない」→ NO:</strong> 手袋はあくまで補助です。時間管理が基本です。</li><li><strong>「症状が出たら休めば治る」→ NO:</strong> 一度進行すると、完治は非常に困難です。</li></ul><p>正しい知識を持つことが、誤った判断を防ぎます。</p><div class="footer">43 / 51</div></div>
    <div class="slide"><h2>メンタルヘルスとの関連</h2><p>振動障害による痛み、しびれ、握力低下は、日常生活にも支障をきたし、大きなストレスや不安感に繋がることがあります。</p><ul><li>趣味の活動が楽しめなくなる。</li><li>将来への不安を感じる。</li></ul><p>身体の健康だけでなく、心の健康を維持するためにも、予防は極めて重要です。一人で抱え込まず、不調は早めに相談しましょう。</p><div class="footer">44 / 51</div></div>

    <!-- Slide 45: Interactive KYT with Gemini API -->
    <div class="slide">
        <h2>✨ インタラクティブKYT演習 (Gemini API)</h2>
        <p>訓練したい状況を簡単に入力し、Geminiに詳細なシナリオを作成させてみましょう。</p>
        <input type="text" id="kyt-prompt" class="kyt-input" placeholder="例：雨天の高速道路での多重衝突事故">
        <button id="generate-kyt-btn" class="gemini-feature-btn" style="width: 100%; padding: 12px; font-size: 1.2em; border-radius: 8px;">
            <span class="btn-text">✨ KYTシナリオを生成</span>
            <div class="btn-loader"></div>
        </button>
        <div id="kyt-loader" class="loader"></div>
        <div id="kyt-result-container" class="kyt-result" style="display:none;">
            <h3>生成されたシナリオ:</h3>
            <pre id="kyt-result-text"></pre>
        </div>
        <div class="footer">45 / 51</div>
    </div>

    <!-- Slide 46: Conclusion -->
    <div class="slide">
        <h2>第7章 まとめ</h2>
        <h3>本日の重要ポイント振り返り</h3>
        <ul>
            <li>振動障害は、一度なると<strong>完治が難しい</strong>不可逆的な障害である。</li>
            <li>予防の鍵は<strong>「日振動ばく露量 A(8)」</strong>の管理。強い工具ほど作業時間は短くなる。</li>
            <li>工具選定時は<strong>「3軸合成値」</strong>の確認を徹底する。</li>
            <li>作業時は<strong>「強く握らない」「10分以内で休憩」</strong>を意識する。</li>
            <li><strong>定期的な健康診断</strong>と、正直な症状の申告が早期発見に繋がる。</li>
        </ul>
        <div class="footer">46 / 51</div>
    </div>
    <!-- Slide 47 -->
    <div class="slide">
        <h2>継続的な安全文化の醸成</h2>
        <p><strong>安全衛生教育は一度きりのイベントではありません。</strong></p>
        <ul>
            <li>日々の訓練やミーティングで、振動工具のリスクを繰り返し確認する。</li>
            <li>先輩隊員は、後輩隊員の工具の扱い方や様子に気を配る。</li>
            <li>「これくらい大丈夫だろう」という過信をなくし、不調を感じたらすぐに報告できる職場環境を作る。</li>
        </ul>
        <p><strong>組織と個人、双方の取り組みで「セーフティカルチャー」を育てましょう。</strong></p>
        <div class="footer">47 / 51</div>
    </div>
    <!-- Slide 48 -->
    <div class="slide">
        <h2>参考資料</h2>
        <p>より深く学ぶために、これらのテキストの活用も有効です。</p>
        <ul>
            <li><strong>「振動障害防止のために（改訂版）」</strong>(建設業労働災害防止協会)</li>
            <li><strong>「振動工具取扱作業者安全衛生教育用テキスト」</strong>(建設業労働災害防止協会)</li>
        </ul>
        <p class="note">*各消防本部で、これらのテキストを参考に、独自の教材（保有資機材リスト等）を作成することを推奨します。</p>
        <div class="footer">48 / 51</div>
    </div>
    <!-- Slide 49 -->
    <div class="slide">
        <h2>最後に</h2>
        <p>国民の生命と財産を守る消防隊員の皆様の安全と健康は、社会全体の基盤です。</p>
        <p><strong>予防対策への投資は、あなた自身の未来、そして組織の未来を守るための、最も重要な投資です。</strong></p>
        <div class="footer">49 / 51</div>
    </div>
    <!-- Slide 50 -->
    <div class="slide">
        <div class="slide-title">
            <h2>質疑応答</h2>
            <p style="font-size: 1.5em;">ご質問のある方は、挙手にてお願いいたします。</p>
        </div>
        <div class="footer">50 / 51</div>
    </div>
    <!-- Slide 51 -->
    <div class="slide">
        <div class="slide-title">
            <h2>ご清聴いただき、ありがとうございました。</h2>
            <p style="font-size: 1.5em;">今後の活動における皆様の安全を心より願っております。</p>
        </div>
        <div class="footer">51 / 51</div>
    </div>

<script type="module">
    // --- Global Variables & Constants ---
    const apiKey = "AIzaSyAM1ZZibznTJZ9nSzWTrdw7zKyyBX8UmVM"; // This key is for the KYT generator only
    
    const slides = document.querySelectorAll('.slide');
    let currentSlide = 0;
    
    // --- Gemini API Feature Elements (For KYT Generator) ---
    const generateKytBtn = document.getElementById('generate-kyt-btn');
    const kytPromptInput = document.getElementById('kyt-prompt');
    const kytResultContainer = document.getElementById('kyt-result-container');
    const kytResultText = document.getElementById('kyt-result-text');
    const kytLoader = document.getElementById('kyt-loader');

    // --- Navigation Elements ---
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    // --- Slide Navigation Functions ---
    function showSlide(index) {
        slides.forEach((slide, i) => {
            slide.classList.toggle('active', i === index);
        });
    }

    function nextSlide() {
        currentSlide = (currentSlide + 1) % slides.length;
        showSlide(currentSlide);
    }

    function prevSlide() {
        currentSlide = (currentSlide - 1 + slides.length) % slides.length;
        showSlide(currentSlide);
    }

    // --- API Helper with Enhanced Error Logging ---
    async function fetchWithBackoff(url, options, maxRetries = 5) {
        let delay = 1000;
        for (let i = 0; i < maxRetries; i++) {
            try {
                const response = await fetch(url, options);
                if (response.ok) {
                    return response.json();
                } else {
                    const errorBody = await response.text();
                    let detailedError = `API Error: Status ${response.status}.`;
                    try {
                        const errorJson = JSON.parse(errorBody);
                        detailedError += ` Message: ${errorJson.error?.message || 'No message available.'}`;
                    } catch (e) {
                        detailedError += ` Response: ${errorBody}`;
                    }
                    console.error("API Request Failed:", detailedError);
                    throw new Error(detailedError);
                }
            } catch (error) {
                console.error(`Attempt ${i + 1} failed: ${error.message}`);
                if (i === maxRetries - 1) {
                    throw error;
                }
                await new Promise(resolve => setTimeout(resolve, delay));
                delay *= 2;
            }
        }
    }

    // --- KYT Scenario Generator Feature ---
    async function handleGenerateKyt() {
        const userPrompt = kytPromptInput.value.trim();
        if (!userPrompt) {
            alert("シナリオの状況を入力してください。");
            return;
        }

        generateKytBtn.disabled = true;
        generateKytBtn.classList.add('loading');
        kytResultContainer.style.display = 'none';
        kytLoader.style.display = 'block';

        const systemPrompt = "あなたは、日本の消防救助活動と労働安全衛生に精通した専門家です。特に、振動工具の安全な取り扱いに関する深い知識を持っています。簡潔かつ具体的に、箇条書きで回答してください。";
        const fullPrompt = `${userPrompt} という状況を想定した、危険予知訓練（KYT）のシナリオを作成してください。以下の3つの要素を必ず含めてください。
1. **【状況】:** 具体的な情景が目に浮かぶように、詳細に記述してください。
2. **【危険のポイント】:** 特に振動工具の使用に関連するリスク（レイノー現象、握力低下、血行不良など）を最低1つは含めて、具体的に指摘してください。二次災害のリスクにも言及してください。
3. **【対策案】:** 危険を回避するための具体的な行動を複数提案してください。`;

        try {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            const payload = {
                contents: [{ parts: [{ text: fullPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
            };
            
            const result = await fetchWithBackoff(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            const text = result.candidates?.[0]?.content?.parts?.[0]?.text;
            
            if (text) {
                kytResultText.textContent = text;
                kytResultContainer.style.display = 'block';
            } else {
                throw new Error("No text generated in API response.");
            }
        } catch (error) {
            alert("シナリオの生成中にエラーが発生しました。詳細はブラウザのコンソール（F12キー）をご確認ください。");
            kytResultText.textContent = "エラーが発生しました。";
            kytResultContainer.style.display = 'block';
        } finally {
            generateKytBtn.disabled = false;
            generateKytBtn.classList.remove('loading');
            kytLoader.style.display = 'none';
        }
    }

    // --- Event Listeners Initialization ---
    document.addEventListener('DOMContentLoaded', () => {
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                nextSlide();
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                prevSlide();
            }
        });

        if(prevBtn) prevBtn.addEventListener('click', prevSlide);
        if(nextBtn) nextBtn.addEventListener('click', nextSlide);
        if (generateKytBtn) generateKytBtn.addEventListener('click', handleGenerateKyt);

        showSlide(0);
    });
</script>

</body>
</html>

